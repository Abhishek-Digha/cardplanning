{"ast":null,"code":"import React,{useEffect,useState}from'react';import{useSession}from'../contexts/SessionContext';import{sessionAPI}from'../utils/api';import MembersList from'./MembersList';import StoryManager from'./StoryManager';import VotingBoard from'./VotingBoard';import AdminControls from'./AdminControls';import{UserIcon,LogoutIcon}from'./Icons';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function SessionRoom(_ref){let{sessionData,onLeaveSession}=_ref;const{dispatch,socket,session,user}=useSession();const[loading,setLoading]=useState(true);useEffect(()=>{dispatch({type:'SET',payload:{session:{id:sessionData.sessionId,code:sessionData.sessionCode,members:[],// will be populated by fetch\nstories:[],// will be populated by fetch\nactiveStoryId:null,userId:sessionData.userId},user:sessionData.user}});socket.emit('joinSession',sessionData.sessionId);sessionAPI.getSession(sessionData.sessionId).then(full=>{dispatch({type:'SET',payload:{session:full,stories:full.stories}});if(full.activeStoryId){const as=full.stories.find(s=>s.id===full.activeStoryId);dispatch({type:'SET_ACTIVE',payload:as});}}).finally(()=>setLoading(false));},[]);if(loading)return/*#__PURE__*/_jsx(\"div\",{className:\"loading\",children:\"Loading...\"});return/*#__PURE__*/_jsxs(\"div\",{className:\"session-room\",children:[/*#__PURE__*/_jsxs(\"header\",{style:{display:'flex',alignItems:'center',justifyContent:'space-between'},children:[/*#__PURE__*/_jsxs(\"h1\",{children:[\"Session Code: \",/*#__PURE__*/_jsx(\"strong\",{children:session.code})]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',alignItems:'center',gap:'0.5em'},children:[/*#__PURE__*/_jsxs(\"button\",{style:{display:'flex',alignItems:'center',gap:'0.5em',background:'#e3f0fc',color:'#1976d2',borderRadius:'20px',padding:'6px 16px',border:'none',fontWeight:'bold',cursor:'default',fontSize:'1rem',boxShadow:'0 1px 4px rgba(25,118,210,0.08)'},tabIndex:-1,disabled:true,children:[/*#__PURE__*/_jsx(UserIcon,{size:20,color:\"#1976d2\"}),user===null||user===void 0?void 0:user.name]}),/*#__PURE__*/_jsxs(\"button\",{onClick:onLeaveSession,style:{display:'flex',alignItems:'center',gap:'0.5em',background:'#fff',color:'#d32f2f',borderRadius:'20px',padding:'6px 16px',border:'1px solid #d32f2f',fontWeight:'bold',cursor:'pointer',fontSize:'1rem',transition:'background 0.2s',boxShadow:'0 1px 4px rgba(211,47,47,0.08)'},onMouseOver:e=>e.currentTarget.style.background='#ffeaea',onMouseOut:e=>e.currentTarget.style.background='#fff',children:[/*#__PURE__*/_jsx(LogoutIcon,{size:20,color:\"#d32f2f\"}),\"Leave\"]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"content\",children:[/*#__PURE__*/_jsxs(\"aside\",{children:[/*#__PURE__*/_jsx(MembersList,{}),/*#__PURE__*/_jsx(StoryManager,{})]}),/*#__PURE__*/_jsxs(\"main\",{children:[/*#__PURE__*/_jsx(VotingBoard,{}),user.isAdmin&&/*#__PURE__*/_jsx(AdminControls,{})]})]})]});}","map":{"version":3,"names":["React","useEffect","useState","useSession","sessionAPI","MembersList","StoryManager","VotingBoard","AdminControls","UserIcon","LogoutIcon","jsx","_jsx","jsxs","_jsxs","SessionRoom","_ref","sessionData","onLeaveSession","dispatch","socket","session","user","loading","setLoading","type","payload","id","sessionId","code","sessionCode","members","stories","activeStoryId","userId","emit","getSession","then","full","as","find","s","finally","className","children","style","display","alignItems","justifyContent","gap","background","color","borderRadius","padding","border","fontWeight","cursor","fontSize","boxShadow","tabIndex","disabled","size","name","onClick","transition","onMouseOver","e","currentTarget","onMouseOut","isAdmin"],"sources":["C:/Users/abhis/Downloads/story-pointing-app/frontend/src/components/SessionRoom.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport { useSession } from '../contexts/SessionContext';\r\nimport { sessionAPI } from '../utils/api';\r\nimport MembersList from './MembersList';\r\nimport StoryManager from './StoryManager';\r\nimport VotingBoard from './VotingBoard';\r\nimport AdminControls from './AdminControls';\r\nimport { UserIcon, LogoutIcon } from './Icons';\r\n\r\nexport default function SessionRoom({sessionData,onLeaveSession}){\r\n  const {dispatch,socket,session,user} = useSession();\r\n  const [loading,setLoading]=useState(true);\r\n\r\n  useEffect(()=>{\r\n    dispatch({ type: 'SET', payload: {\r\n  session: {\r\n    id: sessionData.sessionId,\r\n    code: sessionData.sessionCode,\r\n    members: [],         // will be populated by fetch\r\n    stories: [],         // will be populated by fetch\r\n    activeStoryId: null,\r\n    userId: sessionData.userId\r\n  },\r\n  user: sessionData.user\r\n}});\r\n\r\n    socket.emit('joinSession',sessionData.sessionId);\r\n    sessionAPI.getSession(sessionData.sessionId)\r\n      .then(full=>{\r\n        dispatch({type:'SET',payload:{session:full,stories:full.stories}});\r\n        if(full.activeStoryId){\r\n          const as=full.stories.find(s=>s.id===full.activeStoryId);\r\n          dispatch({type:'SET_ACTIVE',payload:as});\r\n        }\r\n      })\r\n      .finally(()=>setLoading(false));\r\n  },[]);\r\n\r\n  if(loading) return <div className=\"loading\">Loading...</div>;\r\n\r\n  return (\r\n    <div className=\"session-room\">\r\n      <header style={{display:'flex',alignItems:'center',justifyContent:'space-between'}}>\r\n        <h1>Session Code: <strong>{session.code}</strong></h1>\r\n        <div style={{display:'flex',alignItems:'center',gap:'0.5em'}}>\r\n          <button\r\n            style={{\r\n              display:'flex',alignItems:'center',gap:'0.5em',\r\n              background:'#e3f0fc',color:'#1976d2',borderRadius:'20px',padding:'6px 16px',border:'none',fontWeight:'bold',cursor:'default',fontSize:'1rem',boxShadow:'0 1px 4px rgba(25,118,210,0.08)'\r\n            }}\r\n            tabIndex={-1}\r\n            disabled\r\n          >\r\n            <UserIcon size={20} color=\"#1976d2\" />\r\n            {user?.name}\r\n          </button>\r\n          <button\r\n            onClick={onLeaveSession}\r\n            style={{\r\n              display:'flex',alignItems:'center',gap:'0.5em',\r\n              background:'#fff',color:'#d32f2f',borderRadius:'20px',padding:'6px 16px',border:'1px solid #d32f2f',fontWeight:'bold',cursor:'pointer',fontSize:'1rem',transition:'background 0.2s',boxShadow:'0 1px 4px rgba(211,47,47,0.08)'\r\n            }}\r\n            onMouseOver={e=>e.currentTarget.style.background='#ffeaea'}\r\n            onMouseOut={e=>e.currentTarget.style.background='#fff'}\r\n          >\r\n            <LogoutIcon size={20} color=\"#d32f2f\" />\r\n            Leave\r\n          </button>\r\n        </div>\r\n      </header>\r\n      <div className=\"content\">\r\n        <aside>\r\n          <MembersList />\r\n          <StoryManager />\r\n        </aside>\r\n        <main>\r\n          <VotingBoard />\r\n          {user.isAdmin && <AdminControls />}\r\n        </main>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}