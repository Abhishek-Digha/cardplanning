{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\abhis\\\\Downloads\\\\story-pointing-app\\\\frontend\\\\src\\\\components\\\\AdminControls.js\",\n  _s = $RefreshSig$();\nimport React from 'react';\nimport { useSession } from '../contexts/SessionContext';\nimport { sessionAPI } from '../utils/api';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function AdminControls() {\n  _s();\n  const [customNumber, setCustomNumber] = React.useState(\"\");\n  const [updating, setUpdating] = React.useState(false);\n  const {\n    session,\n    user,\n    activeStory,\n    isRevealed,\n    dispatch,\n    votes,\n    voteCount,\n    totalMembers\n  } = useSession();\n  // Calculate vote count and total members for the current active story\n\n  // Prevent rendering if required data is missing\n  if (!session || !user || !activeStory) return null;\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"admin-controls\",\n    children: /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: async () => {\n        var _updatedSession$stori;\n        await sessionAPI.revealVotes(session.id, activeStory.id, user.id);\n        // Fetch updated session to get revealed state and votes\n        const updatedSession = await sessionAPI.getSession(session.id);\n        // Update votes and isRevealed in context\n        dispatch({\n          type: 'SET',\n          payload: {\n            votes: ((_updatedSession$stori = updatedSession.stories.find(s => s.id === activeStory.id)) === null || _updatedSession$stori === void 0 ? void 0 : _updatedSession$stori.votes) || {},\n            isRevealed: true\n          }\n        });\n      },\n      disabled: isRevealed,\n      style: {\n        padding: '10px 24px',\n        background: isRevealed ? '#a3a3a3' : '#1976d2',\n        color: '#fff',\n        border: 'none',\n        borderRadius: 4,\n        cursor: isRevealed ? 'not-allowed' : 'pointer',\n        fontWeight: 'bold',\n        fontSize: 18,\n        marginTop: '1.2rem',\n        marginBottom: '0.5rem',\n        boxShadow: '0 1px 4px rgba(25,118,210,0.08)'\n      },\n      children: isRevealed ? 'Revealed' : 'Reveal'\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 15,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 14,\n    columnNumber: 5\n  }, this);\n}\n_s(AdminControls, \"I1eyL/NL18pGLkQYrpNCBJDtOFs=\", false, function () {\n  return [useSession];\n});\n_c = AdminControls;\nvar _c;\n$RefreshReg$(_c, \"AdminControls\");","map":{"version":3,"names":["React","useSession","sessionAPI","jsxDEV","_jsxDEV","AdminControls","_s","customNumber","setCustomNumber","useState","updating","setUpdating","session","user","activeStory","isRevealed","dispatch","votes","voteCount","totalMembers","className","children","onClick","_updatedSession$stori","revealVotes","id","updatedSession","getSession","type","payload","stories","find","s","disabled","style","padding","background","color","border","borderRadius","cursor","fontWeight","fontSize","marginTop","marginBottom","boxShadow","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["C:/Users/abhis/Downloads/story-pointing-app/frontend/src/components/AdminControls.js"],"sourcesContent":["import React from 'react';\r\nimport { useSession } from '../contexts/SessionContext';\r\nimport { sessionAPI } from '../utils/api';\r\nexport default function AdminControls(){\r\n  const [customNumber, setCustomNumber] = React.useState(\"\");\r\n  const [updating, setUpdating] = React.useState(false);\r\n  const {session,user,activeStory,isRevealed,dispatch,votes,voteCount,totalMembers} = useSession();\r\n  // Calculate vote count and total members for the current active story\r\n\r\n  // Prevent rendering if required data is missing\r\n  if (!session || !user || !activeStory) return null;\r\n\r\n  return (\r\n    <div className=\"admin-controls\">\r\n      <button\r\n        onClick={async ()=>{\r\n          await sessionAPI.revealVotes(session.id,activeStory.id,user.id);\r\n          // Fetch updated session to get revealed state and votes\r\n          const updatedSession = await sessionAPI.getSession(session.id);\r\n          // Update votes and isRevealed in context\r\n          dispatch({type:'SET',payload:{votes: updatedSession.stories.find(s=>s.id===activeStory.id)?.votes || {}, isRevealed: true}});\r\n        }}\r\n        disabled={isRevealed}\r\n        style={{\r\n          padding:'10px 24px',\r\n          background: isRevealed ? '#a3a3a3' : '#1976d2',\r\n          color:'#fff',\r\n          border:'none',\r\n          borderRadius:4,\r\n          cursor: isRevealed ? 'not-allowed' : 'pointer',\r\n          fontWeight:'bold',\r\n          fontSize:18,\r\n          marginTop:'1.2rem',\r\n          marginBottom:'0.5rem',\r\n          boxShadow:'0 1px 4px rgba(25,118,210,0.08)'\r\n        }}\r\n      >\r\n        {isRevealed ? 'Revealed' : 'Reveal'}\r\n      </button>\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":";;AAAA,OAAOA,KAAK,MAAM,OAAO;AACzB,SAASC,UAAU,QAAQ,4BAA4B;AACvD,SAASC,UAAU,QAAQ,cAAc;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAC1C,eAAe,SAASC,aAAaA,CAAA,EAAE;EAAAC,EAAA;EACrC,MAAM,CAACC,YAAY,EAAEC,eAAe,CAAC,GAAGR,KAAK,CAACS,QAAQ,CAAC,EAAE,CAAC;EAC1D,MAAM,CAACC,QAAQ,EAAEC,WAAW,CAAC,GAAGX,KAAK,CAACS,QAAQ,CAAC,KAAK,CAAC;EACrD,MAAM;IAACG,OAAO;IAACC,IAAI;IAACC,WAAW;IAACC,UAAU;IAACC,QAAQ;IAACC,KAAK;IAACC,SAAS;IAACC;EAAY,CAAC,GAAGlB,UAAU,CAAC,CAAC;EAChG;;EAEA;EACA,IAAI,CAACW,OAAO,IAAI,CAACC,IAAI,IAAI,CAACC,WAAW,EAAE,OAAO,IAAI;EAElD,oBACEV,OAAA;IAAKgB,SAAS,EAAC,gBAAgB;IAAAC,QAAA,eAC7BjB,OAAA;MACEkB,OAAO,EAAE,MAAAA,CAAA,KAAU;QAAA,IAAAC,qBAAA;QACjB,MAAMrB,UAAU,CAACsB,WAAW,CAACZ,OAAO,CAACa,EAAE,EAACX,WAAW,CAACW,EAAE,EAACZ,IAAI,CAACY,EAAE,CAAC;QAC/D;QACA,MAAMC,cAAc,GAAG,MAAMxB,UAAU,CAACyB,UAAU,CAACf,OAAO,CAACa,EAAE,CAAC;QAC9D;QACAT,QAAQ,CAAC;UAACY,IAAI,EAAC,KAAK;UAACC,OAAO,EAAC;YAACZ,KAAK,EAAE,EAAAM,qBAAA,GAAAG,cAAc,CAACI,OAAO,CAACC,IAAI,CAACC,CAAC,IAAEA,CAAC,CAACP,EAAE,KAAGX,WAAW,CAACW,EAAE,CAAC,cAAAF,qBAAA,uBAArDA,qBAAA,CAAuDN,KAAK,KAAI,CAAC,CAAC;YAAEF,UAAU,EAAE;UAAI;QAAC,CAAC,CAAC;MAC9H,CAAE;MACFkB,QAAQ,EAAElB,UAAW;MACrBmB,KAAK,EAAE;QACLC,OAAO,EAAC,WAAW;QACnBC,UAAU,EAAErB,UAAU,GAAG,SAAS,GAAG,SAAS;QAC9CsB,KAAK,EAAC,MAAM;QACZC,MAAM,EAAC,MAAM;QACbC,YAAY,EAAC,CAAC;QACdC,MAAM,EAAEzB,UAAU,GAAG,aAAa,GAAG,SAAS;QAC9C0B,UAAU,EAAC,MAAM;QACjBC,QAAQ,EAAC,EAAE;QACXC,SAAS,EAAC,QAAQ;QAClBC,YAAY,EAAC,QAAQ;QACrBC,SAAS,EAAC;MACZ,CAAE;MAAAxB,QAAA,EAEDN,UAAU,GAAG,UAAU,GAAG;IAAQ;MAAA+B,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAC7B;EAAC;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACN,CAAC;AAEV;AAAC3C,EAAA,CAtCuBD,aAAa;EAAA,QAGiDJ,UAAU;AAAA;AAAAiD,EAAA,GAHxE7C,aAAa;AAAA,IAAA6C,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}