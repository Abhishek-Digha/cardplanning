{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\abhis\\\\Downloads\\\\story-pointing-app\\\\frontend\\\\src\\\\components\\\\StoryManager.js\",\n  _s = $RefreshSig$();\nimport React, { useState } from 'react';\nimport { useSession } from '../contexts/SessionContext';\nimport { sessionAPI } from '../utils/api';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function StoryManager() {\n  _s();\n  const {\n    session,\n    user,\n    stories,\n    activeStory,\n    dispatch\n  } = useSession();\n  const [open, setOpen] = useState(false);\n  const [title, setTitle] = useState('');\n  const [desc, setDesc] = useState('');\n  const handle = async e => {\n    var _updatedSession$stori;\n    e.preventDefault();\n    if (!title) return;\n    await sessionAPI.createStory(session.id, title, desc, user.id);\n    // Fetch updated session to get new stories, members, and votes\n    const updatedSession = await sessionAPI.getSession(session.id);\n    // Find votes for the current active story\n    const activeVotes = ((_updatedSession$stori = updatedSession.stories.find(s => s.id === updatedSession.activeStoryId)) === null || _updatedSession$stori === void 0 ? void 0 : _updatedSession$stori.votes) || {};\n    dispatch({\n      type: 'SET',\n      payload: {\n        stories: updatedSession.stories,\n        session: {\n          ...session,\n          members: updatedSession.members\n        },\n        votes: activeVotes\n      }\n    });\n    setTitle('');\n    setDesc('');\n    setOpen(false);\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"story-manager\",\n    children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n      children: \"Stories\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 32,\n      columnNumber: 7\n    }, this), user.isAdmin && /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: () => setOpen(!open),\n      children: \"+ Add Story\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 34,\n      columnNumber: 9\n    }, this), open && /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: handle,\n      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n        placeholder: \"Title\",\n        value: title,\n        onChange: e => setTitle(e.target.value)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 38,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n        placeholder: \"Description\",\n        value: desc,\n        onChange: e => setDesc(e.target.value)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 43,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"submit\",\n        children: \"Create\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 48,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 37,\n      columnNumber: 9\n    }, this), stories.map(s => /*#__PURE__*/_jsxDEV(\"div\", {\n      className: `story-item ${(activeStory === null || activeStory === void 0 ? void 0 : activeStory.id) === s.id ? 'active' : ''}`,\n      children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n        children: s.title\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 56,\n        columnNumber: 11\n      }, this), s.description && /*#__PURE__*/_jsxDEV(\"p\", {\n        children: s.description\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 57,\n        columnNumber: 29\n      }, this), (activeStory === null || activeStory === void 0 ? void 0 : activeStory.id) === s.id && /*#__PURE__*/_jsxDEV(\"span\", {\n        children: \"Active\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 58,\n        columnNumber: 38\n      }, this)]\n    }, s.id, true, {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 9\n    }, this))]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 31,\n    columnNumber: 5\n  }, this);\n}\n_s(StoryManager, \"qKp1mYmMnInznoFaHhul5t2Dfm8=\", false, function () {\n  return [useSession];\n});\n_c = StoryManager;\nvar _c;\n$RefreshReg$(_c, \"StoryManager\");","map":{"version":3,"names":["React","useState","useSession","sessionAPI","jsxDEV","_jsxDEV","StoryManager","_s","session","user","stories","activeStory","dispatch","open","setOpen","title","setTitle","desc","setDesc","handle","e","_updatedSession$stori","preventDefault","createStory","id","updatedSession","getSession","activeVotes","find","s","activeStoryId","votes","type","payload","members","className","children","fileName","_jsxFileName","lineNumber","columnNumber","isAdmin","onClick","onSubmit","placeholder","value","onChange","target","map","description","_c","$RefreshReg$"],"sources":["C:/Users/abhis/Downloads/story-pointing-app/frontend/src/components/StoryManager.js"],"sourcesContent":["import React, { useState } from 'react';\r\nimport { useSession } from '../contexts/SessionContext';\r\nimport { sessionAPI } from '../utils/api';\r\n\r\nexport default function StoryManager(){\r\n  const {session,user,stories,activeStory,dispatch} = useSession();\r\n  const [open,setOpen]=useState(false);\r\n  const [title,setTitle]=useState('');\r\n  const [desc,setDesc]=useState('');\r\n\r\n  const handle = async e=>{\r\n    e.preventDefault();\r\n    if(!title) return;\r\n    await sessionAPI.createStory(session.id,title,desc,user.id);\r\n    // Fetch updated session to get new stories, members, and votes\r\n    const updatedSession = await sessionAPI.getSession(session.id);\r\n    // Find votes for the current active story\r\n    const activeVotes = updatedSession.stories.find(s=>s.id===updatedSession.activeStoryId)?.votes || {};\r\n    dispatch({\r\n      type:'SET',\r\n      payload:{\r\n        stories: updatedSession.stories,\r\n        session: { ...session, members: updatedSession.members },\r\n        votes: activeVotes\r\n      }\r\n    });\r\n    setTitle('');setDesc('');setOpen(false);\r\n  };\r\n\r\n  return (\r\n    <div className=\"story-manager\">\r\n      <h3>Stories</h3>\r\n      {user.isAdmin && (\r\n        <button onClick={()=>setOpen(!open)}>+ Add Story</button>\r\n      )}\r\n      {open && (\r\n        <form onSubmit={handle}>\r\n          <input \r\n            placeholder=\"Title\"\r\n            value={title}\r\n            onChange={e=>setTitle(e.target.value)}\r\n          />\r\n          <textarea\r\n            placeholder=\"Description\"\r\n            value={desc}\r\n            onChange={e=>setDesc(e.target.value)}\r\n          />\r\n          <button type=\"submit\">Create</button>\r\n        </form>\r\n      )}\r\n      {stories.map(s=>(\r\n        <div \r\n          key={s.id} \r\n          className={`story-item ${activeStory?.id===s.id?'active':''}`}\r\n        >\r\n          <h4>{s.title}</h4>\r\n          {s.description && <p>{s.description}</p>}\r\n          {activeStory?.id===s.id && <span>Active</span>}\r\n        </div>\r\n      ))}\r\n    </div>\r\n  );\r\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}